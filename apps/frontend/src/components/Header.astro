---
import GitIcon from "../assets/GitIcon.astro";
import ForkIcon from "../assets/ForkIcon.astro";
import StartIcon from "../assets/StartIcon.astro";
import IssuesIcon from "../assets/WarningIcon.astro";

const iconsSize = 18;

// Call Git API
const GIT_API = "https://api.github.com/repos/and3sil4/documents-classifier"
const response =  await fetch(GIT_API);
const data = await response.json();

const repoName = data.name;
const forks = data.forks_count;
const starts = data.stargazers_count;
const issues = data.open_issues;
---

<header class="header">
  <a href="https://github.com/AND3SIL4/documents-classifier.git" target="_blank" class="app-info">
    <GitIcon size={36}/>
    <ul class="list">
      <li><span class="info-item">{repoName}</span></li>
      <li>
        <ul class="sub-list">
          <li><span class="info-item"><ForkIcon size={iconsSize}/>{forks}</span></li>
          <li><span class="info-item"><StartIcon size={iconsSize}/>{starts}</span></li>
          <li><span class="info-item"><IssuesIcon size={iconsSize}/>{issues}</span></li>
        </ul>
      </li>
    </ul>
  </a>
</header>

<style>
  a {
    all: unset;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    padding: 10px;
    transition: background-color 0.3s ease, color 0.3s ease;
    opacity: .8;
    color: #555555;
    &:hover {
      opacity: 1;
    }
  }

  ul {
    list-style-type: none;
  }

  .list, .sub-list {
    margin: 0;
    padding: 0;
  }
  
  .sub-list {
    display: flex;
    gap: 5px;
  }

   .header {
      width: 100%;
      background-color: #f5f5f5;
      color: #333333;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
  }

  .app-info {
    padding: 10px;
    display: flex;
    gap: 6px;
    font-size: 0.9rem;
    color: #555555;
  }

  .info-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
</style>
